{"ast":null,"code":"export default {\n  name: 'HistoryQuery',\n\n  data() {\n    return {\n      options: [{\n        value: '1',\n        label: '标本名称',\n        disabled: false\n      }, {\n        value: '2',\n        label: '标本部位',\n        disabled: false\n      }, {\n        value: '3',\n        label: '上传时间',\n        disabled: false\n      }],\n      pickerOptions: {\n        shortcuts: [{\n          text: '最近一周',\n\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n            picker.$emit('pick', [start, end]);\n          }\n\n        }, {\n          text: '最近一个月',\n\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n            picker.$emit('pick', [start, end]);\n          }\n\n        }, {\n          text: '最近三个月',\n\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\n            picker.$emit('pick', [start, end]);\n          }\n\n        }]\n      },\n      searchValue: '1',\n      searchText: '',\n      dateRange: '',\n      isSearch: false\n    };\n  },\n\n  methods: {\n    searchNewHistory() {\n      if (this.searchValue === '1') {\n        // 根据标本名字搜索\n        this.$bus.$emit('updateHistoryPageWithFilter', {\n          \"filterType\": 1,\n          \"filterValue\": this.searchText\n        });\n      } else if (this.searchValue === '2') {\n        // 根据标本部位搜索\n        this.$bus.$emit('updateHistoryPageWithFilter', {\n          \"filterType\": 2,\n          \"filterValue\": this.searchText\n        });\n      } else if (this.searchValue === '3') {\n        // 根据标本上传时间段搜索\n        if (this.dateRange === '') {\n          this.$message({\n            showClose: true,\n            message: '搜索条件不能为空',\n            type: 'error'\n          });\n          return;\n        }\n\n        this.$bus.$emit('updateHistoryPageWithFilter', {\n          \"filterType\": 3,\n          \"filterValue\": this.dateRange\n        });\n      }\n\n      this.isSearch = true;\n    },\n\n    getAllHistory() {\n      this.$bus.$emit('updateHistoryPage');\n      this.isSearch = false;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAiEA;EACAA,oBADA;;EAGAC;IACA;MACAC;QACAC,UADA;QAEAC,aAFA;QAGAC;MAHA,GAIA;QACAF,UADA;QAEAC,aAFA;QAGAC;MAHA,CAJA,EAQA;QACAF,UADA;QAEAC,aAFA;QAGAC;MAHA,CARA,CADA;MAcAC;QACAC;UACAC,YADA;;UAEAC;YACA;YACA;YACAC;YACAC;UACA;;QAPA,GAQA;UACAH,aADA;;UAEAC;YACA;YACA;YACAC;YACAC;UACA;;QAPA,CARA,EAgBA;UACAH,aADA;;UAEAC;YACA;YACA;YACAC;YACAC;UACA;;QAPA,CAhBA;MADA,CAdA;MAyCAC,gBAzCA;MA0CAC,cA1CA;MA2CAC,aA3CA;MA4CAC;IA5CA;EA8CA,CAlDA;;EAmDAC;IACAC;MACA;QACA;QACA;UAAA;UAAA;QAAA;MACA,CAHA,MAIA;QACA;QACA;UAAA;UAAA;QAAA;MACA,CAHA,MAIA;QACA;QACA;UACA;YACAC,eADA;YAEAC,mBAFA;YAGAC;UAHA;UAKA;QACA;;QACA;UAAA;UAAA;QAAA;MACA;;MACA;IACA,CAvBA;;IAwBAC;MACA;MACA;IACA;;EA3BA;AAnDA","names":["name","data","options","value","label","disabled","pickerOptions","shortcuts","text","onClick","start","picker","searchValue","searchText","dateRange","isSearch","methods","searchNewHistory","showClose","message","type","getAllHistory"],"sourceRoot":"src/components/history","sources":["HistoryQuery.vue"],"sourcesContent":["<template>\r\n  <el-row class=\"query-container\">\r\n    <div style=\"width: 15%;height: 90%;justify-content: center;align-items: center;display: flex\">\r\n      <el-select v-model=\"searchValue\" placeholder=\"请选择搜索方式\" style=\"border: #767ff6 solid 1px;border-radius: 4px\" @change=\"searchText='';dateRange='';isSearch=false\">\r\n        <el-option\r\n          v-for=\"item in options\"\r\n          :key=\"item.value\"\r\n          :label=\"item.label\"\r\n          :value=\"item.value\"\r\n          :disabled=\"item.disabled\"\r\n        >\r\n        </el-option>\r\n      </el-select>\r\n    </div>\r\n    <div style=\"width: 77%;height: 90%;justify-content: center;align-items: center;display: flex\">\r\n      <el-input\r\n        v-show=\"searchValue === '1'\"\r\n        placeholder=\"请输入标本名称\"\r\n        v-model=\"searchText\"\r\n        ref=\"search\"\r\n        clearable\r\n        prefix-icon=\"el-icon-search\"\r\n        style=\"border: #767ff6 solid 1px;border-radius: 4px\"\r\n        @keyup.enter.native=\"searchNewHistory()\"\r\n      ></el-input>\r\n      <el-input\r\n        v-show=\"searchValue === '2'\"\r\n        placeholder=\"请输入标本部位\"\r\n        v-model=\"searchText\"\r\n        ref=\"search\"\r\n        clearable\r\n        prefix-icon=\"el-icon-search\"\r\n        style=\"border: #767ff6 solid 1px;border-radius: 4px\"\r\n        @keyup.enter.native=\"searchNewHistory()\"\r\n      ></el-input>\r\n      <el-date-picker\r\n        v-show=\"searchValue === '3'\"\r\n        v-model=\"dateRange\"\r\n        type=\"daterange\"\r\n        align=\"right\"\r\n        unlink-panels\r\n        range-separator=\"至\"\r\n        start-placeholder=\"开始日期\"\r\n        end-placeholder=\"结束日期\"\r\n        :picker-options=\"pickerOptions\"\r\n        @blur=\"searchNewHistory()\"\r\n        style=\"border: #767ff6 solid 1px;border-radius: 4px;width: 100%;\"\r\n      >\r\n      </el-date-picker>\r\n    </div>\r\n    <div style=\"width: 8%;height: 90%;justify-content: center;align-items: center;display: flex\">\r\n      <div v-show=\"!isSearch\" @click=\"searchNewHistory()\" class=\"filter-holder\">\r\n        <i class=\"iconfont icon-shaixuan\" style=\"vertical-align: middle\"></i>\r\n        <span>  筛选</span>\r\n      </div>\r\n      <div v-show=\"isSearch\" @click=\"getAllHistory()\" class=\"filter-closer\">\r\n        <i class=\"el-icon-close\" style=\"vertical-align: middle\"></i>\r\n        <span>  取消</span>\r\n      </div>\r\n    </div>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'HistoryQuery',\r\n\r\n  data() {\r\n    return {\r\n      options: [{\r\n        value: '1',\r\n        label: '标本名称',\r\n        disabled: false,\r\n      }, {\r\n        value: '2',\r\n        label: '标本部位',\r\n        disabled: false,\r\n      }, {\r\n        value: '3',\r\n        label: '上传时间',\r\n        disabled: false,\r\n      }],\r\n      pickerOptions: {\r\n        shortcuts: [{\r\n          text: '最近一周',\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n            picker.$emit('pick', [start, end]);\r\n          }\r\n        }, {\r\n          text: '最近一个月',\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n            picker.$emit('pick', [start, end]);\r\n          }\r\n        }, {\r\n          text: '最近三个月',\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n            picker.$emit('pick', [start, end]);\r\n          }\r\n        }]\r\n      },\r\n      searchValue: '1',\r\n      searchText: '',\r\n      dateRange: '',\r\n      isSearch: false,\r\n    }\r\n  },\r\n  methods:{\r\n    searchNewHistory(){\r\n      if (this.searchValue === '1'){\r\n        // 根据标本名字搜索\r\n        this.$bus.$emit('updateHistoryPageWithFilter', {\"filterType\": 1, \"filterValue\": this.searchText});\r\n      }\r\n      else if (this.searchValue === '2'){\r\n        // 根据标本部位搜索\r\n        this.$bus.$emit('updateHistoryPageWithFilter', {\"filterType\": 2, \"filterValue\": this.searchText});\r\n      }\r\n      else if (this.searchValue === '3'){\r\n        // 根据标本上传时间段搜索\r\n        if (this.dateRange === ''){\r\n          this.$message({\r\n            showClose: true,\r\n            message: '搜索条件不能为空',\r\n            type: 'error'\r\n          });\r\n          return;\r\n        }\r\n        this.$bus.$emit('updateHistoryPageWithFilter', {\"filterType\": 3, \"filterValue\": this.dateRange});\r\n      }\r\n      this.isSearch = true;\r\n    },\r\n    getAllHistory(){\r\n      this.$bus.$emit('updateHistoryPage');\r\n      this.isSearch = false;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.query-container {\r\n  width: 1300px;\r\n  height: 75px;\r\n  margin: 0 auto;\r\n  padding-bottom: 10px;\r\n  display: flex;\r\n  justify-content: start;\r\n  align-items: center;\r\n  flex-direction: row;\r\n}\r\n.filter-holder {\r\n  color: #4b56ff;\r\n  cursor: pointer;\r\n  transition: 0.3s ease;\r\n\r\n}\r\n.filter-holder:hover{\r\n  color: #989ffc;\r\n}\r\n.filter-holder:focus{\r\n  color: #989ffc;\r\n}\r\n\r\n.filter-closer {\r\n  color: #d30000;\r\n  cursor: pointer;\r\n  transition: 0.3s ease;\r\n\r\n}\r\n.filter-closer:hover{\r\n  color: #ff4c4c;\r\n}\r\n.filter-closer:focus{\r\n  color: #ff4c4c;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}